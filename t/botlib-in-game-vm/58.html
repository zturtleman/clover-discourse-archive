<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from forum.clover.moe/t/botlib-in-game-vm/58 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 13 Aug 2018 19:53:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Botlib in Game VM - Spearmint - Magical Clover Forum</title>
    <meta name="description" content="I ported the botlib (except the C preprocessor which is also used by Team Arena CGame/UI) into the Game VM. This required the ability to free memory, which was added in Spearmint devil branch and released in Spearmint 0.&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 2.1.0.beta4 - https://github.com/discourse/discourse version 94622b451a19f0f5152280f146354ab663d06eb8">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/8d64303f6f94740f94b6a460adfb8b936d6fdb65.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/e0bc53086df7471db874a7d0c70ce1d2d653b278.png">
<link rel="icon" type="image/png" sizes="144x144" href="../../uploads/default/original/1X/e0bc53086df7471db874a7d0c70ce1d2d653b278.png">
<meta name="theme-color" content="#bbeebb">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="58.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.clover.moe","potentialAction":{"@type":"SearchAction","target":"https://forum.clover.moe/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Magical Clover Forum Search">

      <link href="../../stylesheets/desktop_1_bdd11c5ff6b465c06e9ec1c7b16931ccf4884ce93b43.css?__ws=forum.clover.moe" media="all" rel="stylesheet" data-target="desktop" data-theme-id="1"/>
      <link href="../../stylesheets/desktop_theme_1_e42a03b7f95c4cdf2569b14817761786616cb9de3b43.css?__ws=forum.clover.moe" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Botlib in Game VM&#39;" href="58.rss" />
  <meta property="og:site_name" content="Magical Clover Forum" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.clover.moe/uploads/default/original/1X/e0bc53086df7471db874a7d0c70ce1d2d653b278.png" />
<meta property="og:image" content="https://forum.clover.moe/uploads/default/original/1X/e0bc53086df7471db874a7d0c70ce1d2d653b278.png" />
<meta property="og:url" content="https://forum.clover.moe/t/botlib-in-game-vm/58" />
<meta name="twitter:url" content="https://forum.clover.moe/t/botlib-in-game-vm/58" />
<meta property="og:title" content="Botlib in Game VM" />
<meta name="twitter:title" content="Botlib in Game VM" />
<meta property="og:description" content="I ported the botlib (except the C preprocessor which is also used by Team Arena CGame/UI) into the Game VM. This required the ability to free memory, which was added in Spearmint devil branch and released in Spearmint 0.4. See botlib branch.  I’m planning to move files I had previously ported to Game VM back into the botlib. The main reason I’m holding off merging it into master branch is because BSPC requires parts of the botlib in the engine.  I have a bspc branch with it ported to mint-arena ..." />
<meta name="twitter:description" content="I ported the botlib (except the C preprocessor which is also used by Team Arena CGame/UI) into the Game VM. This required the ability to free memory, which was added in Spearmint devil branch and released in Spearmint 0.4. See botlib branch.  I’m planning to move files I had previously ported to Game VM back into the botlib. The main reason I’m holding off merging it into master branch is because BSPC requires parts of the botlib in the engine.  I have a bspc branch with it ported to mint-arena ..." />
<meta property="article:published_time" content="2016-07-13T16:20:34+00:00" />
<meta property="og:ignore_canonical" content="true" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/e0fba8786bf072fa9d149ae89abf88bdac001685.png" alt="Magical Clover Forum" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="58.html">Botlib in Game VM</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/spearmint.html" itemprop="url">
        <span itemprop="title">Spearmint</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='https://forum.clover.moe/u/zturtleman'><b itemprop='author'>zturtleman</b></a>
           
           <time datetime='2016-07-13T16:20:34Z' itemprop='datePublished'>
             2016-07-13 16:20:34 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I ported the botlib (except the C preprocessor which is also used by Team Arena CGame/UI) into the Game VM. This required the ability to free memory, which was added in Spearmint devil branch and released in Spearmint 0.4. See <a href="https://github.com/zturtleman/mint-arena/tree/botlib">botlib branch</a>.</p>
<p>I’m planning to move files I had previously ported to Game VM back into the botlib. The main reason I’m holding off merging it into master branch is because BSPC requires parts of the botlib in the engine.</p>
<p>I have a <a href="https://github.com/zturtleman/mint-arena/tree/botlib">bspc branch</a> with it ported to mint-arena based on the botlib branch but it require a bunch of engine code, including BSP and ZIP loading and the C preprocessor, to be duplicated. <img src="../../images/emoji/twitter/wearyae52.png?v=5" title=":weary:" class="emoji" alt=":weary:"></p>
<p>So I’m still working through how to handle this, but it will happen eventually.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Botlib in Game VM'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='https://forum.clover.moe/u/KuehnhammerTobias'><b itemprop='author'>KuehnhammerTobias</b></a>
           
           <time datetime='2016-07-14T11:49:37Z' itemprop='datePublished'>
             2016-07-14 11:49:37 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>To be honest, I can’t really help you with all this! Currently I also struggling with serious AI (botlib) problems.<br>
So, just a few thoughts:</p>
<p>What I wonder is how the new memory system affects mint-iortcw (AAS Routing)? Maybe I do understand everything wrong, but doesn’t <strong>‘trap_HeapMalloc’</strong> replace’  <strong>‘trap_Alloc’</strong>, which in turn replaced <strong>‘GetClearedMemory’</strong> as a similiar function?<br>
Does this mean that the routing table (be_aas_routetable.c) will also move into game? Or is this a completely different story? I think the routing table is also using <strong>‘AAS_RT_GetClearedMemory’</strong>!</p>
<p>Well, I assume you know some reasons why it was better to move lot of botlib code into game. For low-skilled programmers like me it’s nearly impossible to understand your code changes. Sometimes I wish the moved AI code back into botlib! But this is only due to lack of skill on my side…, so, I bet you will find a good solution!</p>
<p>Could this freeing of memory also be used to fix the old idtech3 bug where a crash happens if lot of bots/models are removed and another bunch of new bots/models are added afterwards? I think you know what bug I’m talking about (we talked about that bug a long time ago).<br>
You know, if you have many different player models and remove them (e.g.: by a kickall command) and load another bunch of bots with different models the game will crash because assets (skins/textures/sounds) aren’t removed from memory.<br>
Will using <strong>‘trap_HeapFree’</strong> fix this idtech3 bug?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Botlib in Game VM'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='https://forum.clover.moe/u/zturtleman'><b itemprop='author'>zturtleman</b></a>
           
           <time datetime='2016-07-14T13:03:48Z' itemprop='datePublished'>
             2016-07-14 13:03:48 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, trap_HeapMalloc replaces trap_Alloc and provides botlib GetMemory / malloc. be_aas_routetable.c will be able to be in the game VM.</p>
<p>trap_HeapFree does not affect renderer never freeing models, images, and skin surfaces.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Botlib in Game VM'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='https://forum.clover.moe/u/KuehnhammerTobias'><b itemprop='author'>KuehnhammerTobias</b></a>
           
           <time datetime='2016-07-14T13:31:12Z' itemprop='datePublished'>
             2016-07-14 13:31:12 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh shit! I thought  trap_HeapFree would/could flush the whole memory, even models, images and skins.<br>
Sorry, I’m an idiot, I better continue playing chess instead of talking about programming like a pro!<br>
Anyways, thanks for the clarification!</p>
<p>Do you plan to provide RtCW’s AAS worlds in Spearmint engine? For me it’s hard to do this even now! Not to think about that when be_aas_routetable.c will be in game vm! <img src="../../images/emoji/twitter/worriedae52.png?v=5" title=":worried:" class="emoji" alt=":worried:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Botlib in Game VM'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='https://forum.clover.moe/u/zturtleman'><b itemprop='author'>zturtleman</b></a>
           
           <time datetime='2016-07-15T15:49:36Z' itemprop='datePublished'>
             2016-07-15 15:49:36 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Engine just loads AAS and lets game VM access it. AAS is all moving to game VM.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Botlib in Game VM'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.clover.moe/t/botlib-in-game-vm/58 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 13 Aug 2018 19:53:25 GMT -->
</html>
